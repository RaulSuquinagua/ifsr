{"version":3,"sources":["./src/app/orders/orders.page.html","./src/app/orders/orders.module.ts","./src/app/orders/orders.page.scss","./src/app/orders/orders.page.ts"],"names":[],"mappings":"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","file":"orders-orders-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'ORDERS' | translate }} ({{orders.length}})</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-row>\\n    <ion-col size=\\\"8\\\">\\n      <ion-card>\\n        <ion-card-content>\\n          <div\\n            style=\\\"display: flex;flex-direction: row;padding: 8px 0px;justify-content: space-between;align-items: center;\\\">\\n            <div>\\n              <input type=\\\"date\\\" [(ngModel)]=\\\"selectedDate\\\" (change)=\\\"getAllOrders()\\\">\\n            </div>\\n            <div style=\\\"display: flex;justify-content: center;align-items: center;\\\">\\n              <select [(ngModel)]=\\\"filter.orderStatus\\\" (change)=\\\"sortByStatus()\\\">\\n                <option value=\\\"ordered\\\">Ordered</option>\\n                <option value=\\\"processing\\\">Processing</option>\\n                <option value=\\\"ontheway\\\">On the way</option>\\n                <option value=\\\"delivered\\\">Delivered</option>\\n                <option value=\\\"canceled\\\">Canceled</option>\\n              </select>\\n              &nbsp;&nbsp;\\n              <select [(ngModel)]=\\\"filter.driverId\\\" (change)=\\\"sortByDriver()\\\">\\n                <option value=\\\"unassigned\\\">Unassigned</option>\\n                <option *ngFor=\\\"let driver of drivers\\\" value=\\\"{{driver.key}}\\\">{{driver.name}}</option>\\n              </select>\\n              <ion-button size=\\\"small\\\" fill=\\\"clear\\\" (click)=\\\"reset()\\\">{{ 'RESET' | translate }}</ion-button>\\n            </div>\\n          </div>\\n          <p *ngIf=\\\"orders.length == 0 \\\">No orders found on {{selectedDate}}</p>\\n          <table *ngIf=\\\"orders.length != 0\\\">\\n            <thead>\\n              <tr>\\n                <td>{{ 'DESCRIPTION' | translate }}</td>\\n                <td>{{ 'STATUS' | translate }}</td>\\n                <td>{{ 'PRICE' | translate }}</td>\\n                <td>{{ 'ACTION' | translate }}</td>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let order of orders\\\">\\n                <td>\\n                  <p style=\\\"font-weight: 700; margin:4\\\">Order Id: {{order.createdAt}}</p>\\n                  <p style=\\\"color: #777;font-size:14px\\\">{{order.createdAt | date: 'dd-MM-yyyy h:mm:ss a'}}</p>\\n                </td>\\n                <td>\\n                  {{order.orderStatus}}\\n                </td>\\n                <td>\\n                  <h5>{{order.finalPrice}} {{currency}}</h5>\\n                </td>\\n                <td>\\n                  <ion-button size=\\\"small\\\" fill=\\\"clear\\\" color=\\\"secondary\\\" (click)=\\\"view(order)\\\">\\n                    <ion-icon name=\\\"eye\\\"></ion-icon>\\n                  </ion-button>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n        </ion-card-content>\\n      </ion-card>\\n    </ion-col>\\n    <ion-col size=\\\"4\\\" *ngIf=\\\"order.key != undefined\\\">\\n      <ion-card>\\n        <ion-card-content>\\n          <ion-list lines=\\\"none\\\">\\n            <ion-item>\\n              <ion-label>\\n                <h3>Order ID: {{ order.createdAt }}</h3>\\n              </ion-label>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label>\\n                Status\\n              </ion-label>\\n              <select slot=\\\"end\\\" [(ngModel)]=\\\"order.orderStatus\\\" (change)=\\\"updateStatus(order.key,order.orderStatus)\\\">\\n                <option value=\\\"ordered\\\">Ordered</option>\\n                <option value=\\\"processing\\\">Processing</option>\\n                <option value=\\\"ontheway\\\">On the way</option>\\n                <option value=\\\"delivered\\\">Delivered</option>\\n                <option value=\\\"canceled\\\">Canceled</option>\\n              </select>\\n            </ion-item>\\n            <ion-item>\\n              <ion-label>\\n                Driver\\n              </ion-label>\\n              <select slot=\\\"end\\\" [(ngModel)]=\\\"order.driverId\\\" (change)=\\\"updateDriver(order.key, order.driverId)\\\">\\n                <option *ngFor=\\\"let driver of drivers\\\" value=\\\"{{driver.key}}\\\">{{driver.name}}</option>\\n              </select>\\n            </ion-item>\\n\\n            <ion-item-divider>\\n              <ion-label>CART</ion-label>\\n              <ion-badge slot=\\\"end\\\">{{order.finalPrice}} {{currency}}</ion-badge>\\n            </ion-item-divider>\\n            <ion-item *ngFor=\\\"let item of order.cart\\\">\\n              <ion-checkbox slot=\\\"start\\\"></ion-checkbox>\\n              <ion-label>\\n                <h3>{{item.name}} </h3>\\n                <p>{{item.qty}} x {{currency}} {{ item.price}} = {{currency}} {{item.total}} </p>\\n              </ion-label>\\n            </ion-item>\\n            <ion-item *ngIf=\\\"order.address != undefined\\\">\\n              <ion-label>\\n                <h3>Address</h3>\\n                <p>{{order.address.address}}-{{order.address.pincode}} (Landmark: {{order.address.landmark}}</p>\\n                <p><a\\n                    href=\\\"https://www.google.com/maps?saddr=Current+Location&daddr={{order.address.lat}},{{order.address.lng}}\\\"\\n                    target=\\\"_blank\\\">View\\n                    on Map</a></p>\\n              </ion-label>\\n            </ion-item>\\n            <ion-item *ngIf=\\\"order.address != undefined\\\">\\n              <ion-label>\\n                {{order.address.mobile}}\\n                <a class=\\\"ion-button\\\" href=\\\"tel:{{order.address.mobile}}\\\">call</a>\\n              </ion-label>\\n            </ion-item>\\n          </ion-list>\\n        </ion-card-content>\\n      </ion-card>\\n    </ion-col>\\n  </ion-row>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OrdersPage } from './orders.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrdersPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [OrdersPage]\n})\nexport class OrdersPageModule {}\n","module.exports = \"ion-card {\\n  --background: #fff;\\n}\\n\\nion-select {\\n  margin: 0 !important;\\n  background: none !important;\\n  border: none !important;\\n}\\n\\ninput {\\n  padding: 2px !important;\\n  height: 28px;\\n  background: #f8f8f8;\\n  outline: 0;\\n  border: 0;\\n  border: 1px solid #eee;\\n  border-radius: 4px;\\n  margin: 2px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvb3JkZXJzL0M6XFxVc2Vyc1xccmF1bHNcXE9uZURyaXZlXFxEZXNrdG9wXFx2ZXJzaW9uIDNcXGlmc3ItMS4wLjFcXGFkbWluL3NyY1xcYXBwXFxvcmRlcnNcXG9yZGVycy5wYWdlLnNjc3MiLCJzcmMvYXBwL29yZGVycy9vcmRlcnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7QUNDSjs7QURDQTtFQUNJLG9CQUFBO0VBQ0EsMkJBQUE7RUFDQSx1QkFBQTtBQ0VKOztBRENBO0VBQ0ksdUJBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxXQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9vcmRlcnMvb3JkZXJzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJke1xuICAgIC0tYmFja2dyb3VuZDogI2ZmZjtcbn1cbmlvbi1zZWxlY3R7XG4gICAgbWFyZ2luOjAgIWltcG9ydGFudDtcbiAgICBiYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG59XG5cbmlucHV0e1xuICAgIHBhZGRpbmc6IDJweCAhaW1wb3J0YW50O1xuICAgIGhlaWdodDogMjhweDtcbiAgICBiYWNrZ3JvdW5kOiAjZjhmOGY4O1xuICAgIG91dGxpbmU6IDA7XG4gICAgYm9yZGVyOiAwO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG1hcmdpbjogMnB4O1xufSIsImlvbi1jYXJkIHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmZmO1xufVxuXG5pb24tc2VsZWN0IHtcbiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gIGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDtcbiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG59XG5cbmlucHV0IHtcbiAgcGFkZGluZzogMnB4ICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogMjhweDtcbiAgYmFja2dyb3VuZDogI2Y4ZjhmODtcbiAgb3V0bGluZTogMDtcbiAgYm9yZGVyOiAwO1xuICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIG1hcmdpbjogMnB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { ActivatedRoute } from '@angular/router';\nimport { CommonService } from '../services/common.service';\nimport { environment } from '../../environments/environment.prod'\n\n@Component({\n  selector: 'app-orders',\n  templateUrl: './orders.page.html',\n  styleUrls: ['./orders.page.scss'],\n})\nexport class OrdersPage implements OnInit {\n  orders: any = [];\n  allOrders: any = [];\n  userId: any = '';\n  drivers: any = [];\n  currency: any = '';\n  filter: any = {};\n  userType = '';\n  today = new Date().toISOString().substring(0, 10);\n  order: any = {};\n  selectedDate: any;\n\n  constructor(\n    private afdb: AngularFireDatabase,\n    private route: ActivatedRoute,\n    private common: CommonService\n  ) {\n    this.currency = environment.currency\n    this.userId = this.route.snapshot.paramMap.get('id');\n    this.userType = this.route.snapshot.paramMap.get('type');\n    this.selectedDate = new Date().toJSON().slice(0, 10).replace(/-/g, '-');\n\n    if (this.userType != undefined) {\n\n      if (this.userType == 'driver') {\n        this.getDriverOrders();\n      }\n      else if (this.userType == 'user') {\n        this.getUserOrders();\n      }\n    }\n    else {\n      this.getAllOrders();\n    }\n\n  }\n\n  ngOnInit() {\n    this.getDrivers()\n  }\n\n  reset() {\n    this.orders = this.allOrders;\n    this.filter = {};\n  }\n\n  sortByDriver() {\n    let data = this.orders;\n    this.orders = data.filter((item: any) => {\n      if (this.filter.driverId == 'unassigned') {\n        return item.driverId == \"\";\n      }\n      else {\n        return item.driverId == this.filter.driverId;\n      }\n    })\n  }\n\n  sort() {\n    let data = this.orders;\n\n    this.orders = data.filter((item: any) => {\n      let createdAt = new Date(item.createdAt).getTime();\n      return createdAt >= new Date(this.filter.from).getTime() && createdAt <= new Date(this.filter.to).getTime();\n    })\n  }\n\n  sortByStatus() {\n    let data = this.orders;\n    console.log(this.filter);\n    this.orders = data.filter((item: any) => {\n      return item.orderStatus == this.filter.orderStatus;\n    })\n  }\n\n\n  getAllOrders() {\n    console.log(this.selectedDate);\n\n    var start = new Date(this.selectedDate);\n    start.setHours(0, 0, 0, 0);\n\n    var end = new Date(this.selectedDate);\n    end.setHours(23, 59, 59, 999);\n\n    let startTime = start.getTime();\n    let endTime = end.getTime();\n    console.log(startTime, endTime);\n\n    this.afdb.list('orders/', ref => ref.orderByChild('createdAt').startAt(startTime).endAt(endTime)).snapshotChanges().subscribe((data: any) => {\n\n      let tmp = [];\n      data.forEach(order => {\n        tmp.push({ key: order.key, ...order.payload.val() })\n      })\n      this.allOrders = tmp;\n      this.orders = tmp.reverse();\n      console.log(this.orders);\n    });\n  }\n\n  getUserOrders() {\n    this.afdb.list('orders', ref => ref.orderByChild('userId').equalTo(this.userId))\n      .snapshotChanges().subscribe((data: any) => {\n        console.log(data);\n        let tmp = [];\n        data.forEach(order => {\n          tmp.push({\n            key: order.key,\n            ...order.payload.val()\n          })\n        })\n        this.orders = tmp;\n      });\n  }\n\n  getDriverOrders() {\n    this.afdb.list('orders', ref => ref.orderByChild('driverId').equalTo(this.userId))\n      .snapshotChanges().subscribe((data: any) => {\n        console.log(data);\n        let tmp = [];\n        data.forEach(order => {\n          tmp.push({\n            key: order.key,\n            ...order.payload.val()\n          })\n        })\n        this.orders = tmp;\n      });\n  }\n\n  updateStatus(key, status) {\n    this.afdb.object('orders/' + key).update({\n      orderStatus: status\n    }).then(() => {\n      this.common.showToast(\"Updated\");\n    }).catch((err) => {\n      this.common.showToast(\"Something went wrong\");\n    })\n  }\n\n  updateDriver(key, driverId) {\n    this.afdb.object('orders/' + key).update({\n      driverId: driverId\n    }).then(() => {\n      this.common.showToast(\"Updated\");\n    }).catch((err) => {\n      this.common.showToast(\"Something went wrong\");\n    })\n  }\n\n\n  getDrivers() {\n\n    this.afdb.list('drivers').snapshotChanges().subscribe((data: any) => {\n      console.log(data);\n      let tmp = [];\n      data.forEach(user => {\n        if (user.payload.val().isApproved == true || user.payload.val().isApproved == \"true\") {\n          tmp.push({\n            key: user.key,\n            ...user.payload.val()\n          })\n        }\n      })\n      this.drivers = tmp;\n\n    });\n    console.log(this.drivers);\n  }\n\n  view(order) {\n    this.order = order;\n  }\n\n\n\n\n\n}\n"],"sourceRoot":""}