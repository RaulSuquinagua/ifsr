{"version":3,"sources":["./src/app/tab2/tab2.page.html","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.scss","./src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      {{ 'CART' | translate }}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"not-found\\\" *ngIf=\\\"total == 0\\\">\\n    <img src=\\\"./assets/images/nodata.png\\\" />\\n    <p>{{ 'NO_ITEMS_FOUND' | translate }}</p>\\n  </div>\\n  <ion-list lines=\\\"none\\\">\\n    <ion-item *ngFor=\\\"let item of cart; let i = index\\\">\\n      <ion-thumbnail slot=\\\"start\\\">\\n        <img src=\\\"{{item.photoURL}}\\\" style=\\\"border-radius: 8px;\\\" />\\n      </ion-thumbnail>\\n      <ion-label style=\\\" text-align: center;\\\">\\n        <ion-text>\\n          <h3>{{item.name}}</h3>\\n        </ion-text>\\n        <ion-button class=\\\"cart-button\\\" color=\\\"primary\\\" fill=\\\"solid\\\" size=\\\"small\\\" (click)=\\\"increase(i)\\\">+</ion-button>\\n        <ion-button fill=\\\"clear\\\" color=\\\"secondary\\\">{{item.qty}}</ion-button>\\n        <ion-button class=\\\"cart-button\\\" color=\\\"primary\\\" fill=\\\"solid\\\" size=\\\"small\\\" (click)=\\\"decrease(i)\\\">-</ion-button>\\n      </ion-label>\\n      <ion-text slot=\\\"end\\\">\\n        {{currency}} {{item.qty * item.price}}\\n      </ion-text>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\\n<ion-footer *ngIf=\\\"total != 0\\\" class=\\\"ion-padding\\\">\\n  <ion-toolbar>\\n    <ion-list lines=\\\"none\\\">\\n      <ion-item>\\n        <ion-label>\\n          Total\\n        </ion-label>\\n        <ion-text slot=\\\"end\\\" class=\\\"final-price\\\">\\n          {{currency}} {{finalPrice}}\\n        </ion-text>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label>\\n          <h3>{{ 'DELIVER_TO' | translate }}</h3>\\n        </ion-label>\\n        <ion-button fill=\\\"clear\\\" *ngIf=\\\"addresses.length == 0\\\" slot=\\\"end\\\" routerLink=\\\"/addaddress\\\">\\n          Select</ion-button>\\n        <ion-select slot=\\\"end\\\" *ngIf=\\\"addresses.length != 0\\\" [(ngModel)]=\\\"addressIndex\\\" (ionChange)=\\\"updateAddress()\\\"\\n          placeholder=\\\"select\\\">\\n          <ion-select-option *ngFor=\\\"let address of addresses; let i=index\\\" value=\\\"{{i}}\\\">{{address.tag}}\\n          </ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n    </ion-list>\\n    <p style=\\\"font-size: 12px;\\\" *ngIf=\\\"address.address != undefined\\\">{{ address.address }}</p>\\n    <ion-button fill=\\\"solid\\\" *ngIf=\\\"!isSubscribe\\\" expand=\\\"block\\\" (click)=\\\"checkout()\\\">\\n      {{ 'CHECKOUT' | translate }}\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\"","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    TranslateModule,\n    RouterModule.forChild([{ path: '', component: Tab2Page }])\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","module.exports = \".checkout {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-direction: row;\\n  -webkit-box-pack: justify;\\n          justify-content: space-between;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  padding: 4px 16px;\\n}\\n\\n.cart-button {\\n  height: 24px !important;\\n  width: 24px !important;\\n  font-size: 12px;\\n  border-radius: 40px;\\n}\\n\\n.final-price {\\n  font-size: 20px;\\n  font-weight: 700;\\n}\\n\\n.footer-md:before {\\n  background: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi9DOlxcVXNlcnNcXHJhdWxzXFxPbmVEcml2ZVxcRGVza3RvcFxcdmVyc2lvbiAzXFxpZnNyLTEuMC4xXFx1c2VyL3NyY1xcYXBwXFx0YWIyXFx0YWIyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLG9CQUFBO0VBQUEsYUFBQTtFQUNBLDhCQUFBO0VBQUEsNkJBQUE7VUFBQSxtQkFBQTtFQUNBLHlCQUFBO1VBQUEsOEJBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0EsaUJBQUE7QUNDSjs7QURFQTtFQUNJLHVCQUFBO0VBQ0Esc0JBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QUNDSjs7QURFQTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtBQ0NKOztBREVBO0VBQ0ksZ0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjIvdGFiMi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2hlY2tvdXR7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHBhZGRpbmc6IDRweCAxNnB4O1xufVxuXG4uY2FydC1idXR0b257XG4gICAgaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7XG4gICAgd2lkdGg6IDI0cHggIWltcG9ydGFudDtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogNDBweDtcbn1cblxuLmZpbmFsLXByaWNle1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBmb250LXdlaWdodDogNzAwO1xufVxuXG4uZm9vdGVyLW1kOmJlZm9yZXtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xufSIsIi5jaGVja291dCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogNHB4IDE2cHg7XG59XG5cbi5jYXJ0LWJ1dHRvbiB7XG4gIGhlaWdodDogMjRweCAhaW1wb3J0YW50O1xuICB3aWR0aDogMjRweCAhaW1wb3J0YW50O1xuICBmb250LXNpemU6IDEycHg7XG4gIGJvcmRlci1yYWRpdXM6IDQwcHg7XG59XG5cbi5maW5hbC1wcmljZSB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbn1cblxuLmZvb3Rlci1tZDpiZWZvcmUge1xuICBiYWNrZ3JvdW5kOiBub25lO1xufSJdfQ== */\"","import { Component, NgZone } from '@angular/core';\nimport { CartService } from '../services/cart.service';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { environment } from '../../environments/environment.prod'\nimport { AlertController } from '@ionic/angular';\nimport { CommonService } from '../services/common.service';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page {\n  total = 0;\n  cart = [];\n  finalPrice = 0;\n  addresses: any = [];\n  addressIndex = 0;\n  address: any = {};\n  currency: any = '';\n  today = new Date().toISOString().substring(0, 10);\n  isSubscribe = false;\n  order: any = {};\n  numbers = Array(30).fill(0).map((x, i) => i + 1);\n\n  constructor(\n    private cartService: CartService,\n    private afdb: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private zone: NgZone,\n    private alertCtrl: AlertController,\n    private common: CommonService\n\n  ) {\n    this.currency = environment.currency;\n    console.log(this.today);\n\n    this.cartService.calculateTotal().subscribe(data => {\n\n      this.zone.run(() => {\n        this.finalPrice = data.finalPrice;\n        console.log(this.finalPrice);\n      })\n    })\n    this.getAddress();\n  }\n  ionViewWillEnter() {\n\n    this.cart = this.cartService.get();\n    this.total = this.cart.length;\n\n    this.cartService.calculateTotal().subscribe(data => {\n      this.finalPrice = data.finalPrice;\n      this.total = data.totalQty;\n    });\n  }\n\n  swapMethod() {\n\n    this.isSubscribe = !this.isSubscribe;\n    console.log(this.isSubscribe);\n  }\n\n  increase(index) {\n    this.cartService.increase(index);\n  }\n\n  decrease(index) {\n    this.cartService.decrease(index);\n  }\n\n  getAddress() {\n    this.afdb.list('users/' + this.afAuth.auth.currentUser.uid + '/address')\n      .snapshotChanges().subscribe((data: any) => {\n        this.addresses = [];\n        data.forEach(address => this.addresses.push({ key: address.key, ...address.payload.val() }));\n      });\n  }\n\n  updateAddress() {\n    if (this.addresses[this.addressIndex] != undefined)\n      this.address = this.addresses[this.addressIndex]\n  }\n\n  checkout() {\n    console.log(this.address);\n    if (Object.keys(this.address).length != 0) {\n      this.alertCtrl.create({\n        message: 'Are you sure want to checkout?',\n        buttons: [\n          { text: 'Confirm', handler: () => this.assignToDriver() },\n          { text: 'Cancel' },\n        ]\n      }).then(r => r.present());\n    }\n    else {\n      this.alertCtrl.create({ message: \"Please Choose Address\" }).then(r => r.present());\n    }\n  }\n\n  assignToDriver() {\n    this.common.showLoader();\n\n    this.afdb.list('drivers', ref => ref.orderByChild(\"pincodes/\" + this.address.pin).equalTo(true))\n      .snapshotChanges().pipe(take(1)).subscribe((drivers: any) => {\n        console.log(drivers);\n        let driverId = '';\n\n        if (drivers != null && drivers != undefined && drivers.length != 0)\n          driverId = drivers[0].key\n        else\n          driverId = '';\n\n        console.log(driverId);\n\n\n        let orderInput = {};\n\n\n        orderInput = {\n          createdAt: new Date().getTime(),\n          userId: this.afAuth.auth.currentUser.uid,\n          cart: this.cart,\n          finalPrice: this.finalPrice,\n          orderStatus: 'ordered',\n          address: this.address,\n          driverId: driverId,\n        }\n\n\n        this.afdb.list('orders').push(orderInput).then(() => {\n          this.common.hideLoader();\n\n          this.cartService.clear();\n          this.cart = [];\n          this.total = 0;\n          this.cartService.calculateTotal();\n\n          this.common.showToast(\"Ordered Placed Successfully\");\n        }).catch(err => {\n          console.log(err);\n          this.common.hideLoader();\n          this.common.showToast(\"Something went wrong\");\n        })\n\n      })\n  }\n}\n"],"sourceRoot":""}